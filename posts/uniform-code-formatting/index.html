<!doctype html><html lang=en><head><title>Enforce uniform code formatting across teams Â· ğŸ¦ Gambits & Exploits
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Christian Lohr"><meta name=description content="My thoughts on how to achieve a holistic, language agnostic code format across teams and projects."><meta name=keywords content="blog,developer,personal,software,engineering,computer,science"><meta name=twitter:card content="summary"><meta name=twitter:title content="Enforce uniform code formatting across teams"><meta name=twitter:description content="My thoughts on how to achieve a holistic, language agnostic code format across teams and projects."><meta property="og:url" content="/posts/uniform-code-formatting/"><meta property="og:site_name" content="ğŸ¦ Gambits & Exploits"><meta property="og:title" content="Enforce uniform code formatting across teams"><meta property="og:description" content="My thoughts on how to achieve a holistic, language agnostic code format across teams and projects."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-01T13:20:31+01:00"><meta property="article:modified_time" content="2023-11-01T13:20:31+01:00"><meta property="article:tag" content="Software Engineering"><meta property="article:tag" content="Code Quality"><meta property="article:tag" content="Standards"><link rel=canonical href=/posts/uniform-code-formatting/><link rel=stylesheet href=/css/coder.min.8948b3e0bf7907ab31d45bc2e21630e40e0baeb9dbf63d317326b55faae4ee7a.css integrity="sha256-iUiz4L95B6sx1FvC4hYw5A4Lrrnb9j0xcya1X6rk7no=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-dark"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>ğŸ¦ Gambits & Exploits
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/now/>Now</a></li><li class=navigation-item><a class=navigation-link href=/uses/>Uses</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=mailto:info@bytewerk.io>Contact me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=/posts/uniform-code-formatting/>Enforce uniform code formatting across teams</a></h1></div><div class=post-meta><div class=date><span class=posted-on>ğŸ—“ï¸
<time datetime=2023-11-01T13:20:31+01:00>November 1, 2023
</time></span><span class=reading-time>ğŸ•
3-minute read</span></div><div class=authors>ğŸ‘¨â€ğŸ”§
<a href=/authors/christian-lohr/>Christian Lohr</a></div><div class=categories>ğŸ“‚
<a href=/categories/software-engineering/>Software Engineering</a>
<span class=separator>â€¢</span>
<a href=/categories/software-architecture/>Software Architecture</a></div><div class=tags>ğŸ·ï¸
<span class=tag><a href=/tags/software-engineering/>Software Engineering</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/code-quality/>Code Quality</a>
</span><span class=separator>â€¢</span>
<span class=tag><a href=/tags/standards/>Standards</a></span></div></div></header><div class=post-content><h1 id=enforce-uniform-code-formatting-across-teams>Enforce uniform code formatting across teams
<a class=heading-link href=#enforce-uniform-code-formatting-across-teams><span class=sr-only>ğŸ”—</span></a></h1><p>With the rise of language centric formatting tools like <code>gofmt</code>, it&rsquo;s become easier than ever to achieve a holistic coding style across team members and projects, avoiding endless warfare over primeval subjective matters like <a href=https://xkcd.com/1285/ class=external-link target=_blank rel=noopener>white space after punctuation</a>, tabs vs. Spaces, etc&mldr; It also combats the cargo cult around style guides promoted by large tech companies (such as the <a href=https://github.com/airbnb/javascript class=external-link target=_blank rel=noopener>AirBnB JS Guide</a>) - although these are still around, they&rsquo;ve become much more focused on overall code architecture and idiomatic usage of their governed language.</p><p>But how do you enforce the usage of a code formatting tool using a given rule set across a heterogeneous mix of operating systems, code editors, IDEs, shells and personal usage preferences? The most obvious choice that might spring to mind is to encompass this issue as part of your CI pipelines, running your code linting tools before builds and tests - and therefore actively encouraging your team to submit properly formatted code only.</p><p>Most modern IDEs will take care of these matters automatically, though <em>VSCode</em> uses a different rule set than <em>GoLand</em> for example. <a href=https://editorconfig.org/ class=external-link target=_blank rel=noopener>EditorConfig</a> exists as a way to unify settings across different engineering environments, though configuration can be cumbersome, and implementation support is pushed on to tool providers.</p><p>Over the past two years, I&rsquo;ve therefore started using a different approach. There is no rule on which IDE or code editing tools to use, as long as you have the standard formatting and linting tools for your language installed on your local machine and are using <code>git</code> as your versioning software.</p><p>For example, the following snippet is taken directly from my <code>.git/hooks/pre-commit</code> file within our <code>go</code> mono repo, although the same setup would work for any other language providing default formatting tools.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>for</span> file in <span class=k>$(</span>git diff --cached --name-only --diff-filter<span class=o>=</span>ACMRTUXB <span class=p>|</span> grep <span class=s2>&#34;\.go&#34;</span><span class=k>)</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;(gofmt) </span><span class=nv>$file</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  gofumpt -w <span class=nv>$file</span>
</span></span><span class=line><span class=cl>  gci write <span class=nv>$file</span> --skip-generated -s standard -s default
</span></span><span class=line><span class=cl>  git add <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>So, what does this actually? It iterates over all my changed <code>go</code> files that are about to be included in my commit. It then runs two formatter tools on each file and stages the changes again.</p><p>The <code>diff-filter</code> arguments ensure we only look at files which have <strong>not</strong> been deleted, you can find more information on their meaning <a href=https://git-scm.com/docs/git-diff#Documentation/git-diff.txt---diff-filterACDMRTUXB82308203 class=external-link target=_blank rel=noopener>here</a>.</p><p>This allows me to completely ignore the style and format of my code, freeing up my brain to focus on implementation and architecture instead. Since passing the file around to coworkers, everyone has come up with their own little variations and adaptions, but we haven&rsquo;t come across a red CI pipeline due to malformed code once.</p><p>It&rsquo;s nice to enjoy your CI waiting coffee in harmonic bliss. I worry about the failing tests enough as it is â˜•</p></div><footer></footer></article></section></div><footer class=footer><section class=container>Â©
2023 -
2025
Christian Lohr
Â·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>